
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A collection of objects and functions to work with calling cards sequencing tools">
      
      
        <meta name="author" content="ben mueller <email@email.com>, chase mateusiak <chasem@wustl.edu>, michael brent <brent@wustl.edu>">
      
      
        <link rel="canonical" href="https://brentlab.github.io/yeastdnnexplorer/tutorials/database_interface/">
      
      
        <link rel="prev" href="../generate_in_silico_data/">
      
      
        <link rel="next" href="../hyperparameter_sweep/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Database Interface - yeastdnnexplorer</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-database-interface-classes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="yeastdnnexplorer" class="md-header__button md-logo" aria-label="yeastdnnexplorer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            yeastdnnexplorer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Database Interface
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/brentlab/yeastdnnexplorer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    yeastdnnexplorer
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="yeastdnnexplorer" class="md-nav__button md-logo" aria-label="yeastdnnexplorer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    yeastdnnexplorer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/brentlab/yeastdnnexplorer" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    yeastdnnexplorer
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../generate_in_silico_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate In-silico Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Database Interface
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Database Interface
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connecting to the Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#database-username-and-password" class="md-nav__link">
    <span class="md-ellipsis">
      Database username and password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-database-interface-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Database Interface Classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Token Authentication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-interface-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Interface Classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#records-only-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Records Only Endpoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Records Only Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-regulatorapi" class="md-nav__link">
    <span class="md-ellipsis">
      Example &ndash; RegulatorAPI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#record-and-file-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Record and File Endpoints
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retrieving-files-from-a-records-and-files-object" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving files from a Records and Files Object
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rank-response" class="md-nav__link">
    <span class="md-ellipsis">
      Rank Response
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hyperparameter_sweep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hyperparameter Sweep
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lightning_crash_course/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lightning Crash Course
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing_model_metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing Model Metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualizing_and_testing_data_generation_methods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visualizing and Testing Data Generation Methods
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Loaders
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Data Loaders
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_loaders/synthetic_data_loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Synthetic Data Loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data_loaders/real_data_loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Real Data Loader
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ml_models/customizable_model/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ml_models/metrics_compute_nrmse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metrics compute nrmse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ml_models/metrics_smse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metrics smse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ml_models/simple_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simple model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../probability_models/default_perturbation_effect_adjustment_function/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Probability Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Probability Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../probability_models/GenePopulation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GenePopulation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../probability_models/generate_binding_effects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate binding effects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../probability_models/generate_gene_population/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate Gene Population
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../probability_models/generate_perturbation_effects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate perturbation effects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../probability_models/generate_pvalues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generate pvalues
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../probability_models/perturbation_effect_adjustment_function_with_tf_relationships_boolean_logic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perturbation effect adjustment function with tf relationships boolean logic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../probability_models/perturbation_effect_adjustment_function_with_tf_relationships/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perturbation effect adjustment function with tf relationships
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Database Interface
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Database Interface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../interface/BindingManualQCAPI/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Records Only Classes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            Records Only Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/DataSourceAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DataSourceAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/ExpressionManualQCAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExpressionManualQCAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/FileFormatAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FileFormatAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/GenomicFeatureAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GenomicFeatureAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/RegulatorAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RegulatorAPI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../interface/BindingAPI/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Records and Files Classes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            Records and Files Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/CallingCardsBackgroundAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CallingCardsBackgroundAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/ExpressionAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExpressionAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/PromoterSetAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PromoterSetAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/PromoterSetSigAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PromoterSetSigAPI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../interface/AbstractAPI/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Developer Classes
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4_3" id="__nav_3_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            Developer Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/AbstractRecordsAndFilesAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AbstractRecordsAndFilesAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/AbstractRecordsOnlyAPI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AbstractRecordsOnlyAPI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/Cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../interface/ParamsDict/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ParamsDict
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connecting to the Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#database-username-and-password" class="md-nav__link">
    <span class="md-ellipsis">
      Database username and password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuring-the-database-interface-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Database Interface Classes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Token Authentication
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-interface-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Interface Classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#records-only-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Records Only Endpoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Records Only Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-regulatorapi" class="md-nav__link">
    <span class="md-ellipsis">
      Example &ndash; RegulatorAPI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#record-and-file-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Record and File Endpoints
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#retrieving-files-from-a-records-and-files-object" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving files from a Records and Files Object
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rank-response" class="md-nav__link">
    <span class="md-ellipsis">
      Rank Response
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var requireJsScript = document.createElement('script');
    requireJsScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js';

    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var jupyterWidgetsScript = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    jupyterWidgetsScript.src = widgetRendererSrc;

    document.body.appendChild(requireJsScript);
    document.body.appendChild(jupyterWidgetsScript);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="the-database-interface-classes">The Database Interface Classes<a class="headerlink" href="#the-database-interface-classes" title="Permanent link">&para;</a></h1>
<p>For each API endpoint exposed in the Django app, there is a corresponding class that
provide methods to execute CRUD operations asynchronously.</p>
<p>There are two types of API endpoints &ndash; those that contain only records data, and 
those that store both records and pointers to files.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="connecting-to-the-database">Connecting to the Database<a class="headerlink" href="#connecting-to-the-database" title="Permanent link">&para;</a></h2>
<p>The database currently runs on HTCF service partition. This is a single
node with 8 CPU and 30 GB that is meant for long running low resource jobs.
The components that need to run are a postgres database, a redis instance and the
django app. As long as these components are running on the service partition, 
you can connect via an ssh tunnel with:</p>
<pre><code class="language-bash">ssh username@login.htcf.wustl.edu -N -L 8001:n240:8000
</code></pre>
<p>where the <code>8001:n240:8000</code> takes the form of <code>local_port:cluster_node:app_port</code>. The
django app will always be served on port <code>8000</code>, and <code>n240</code> is the only service
partition node. You may choose a different local port.</p>
<p>If you do this and cannot connect, let me know and I&rsquo;ll check the status of the jobs 
on the cluster.</p>
<h3 id="database-username-and-password">Database username and password<a class="headerlink" href="#database-username-and-password" title="Permanent link">&para;</a></h3>
<p>Once you have a tunnel, you can access the database frontend at <code>127.0.0.1:8001</code>
(or a different local port, if you changed that number). If you haven&rsquo;t already
signed up, you&rsquo;ll need to click the &lsquo;sign up&rsquo; button and follow
the instructions. The e-mail server is not hooked up at the moment, so when it says
&ldquo;see the e-mail&rdquo;, send a slack message and let me know. I&rsquo;ll give you a link to
complete the sign up process. After that, you can just use the &ldquo;sign in&rdquo; button.</p>
<p>For computational tasks, including generating rank response data, celery workers must
be launched on the HTCF general partition. There is currently a script that is meant to
monitor the redis queue and launch/kill these workers automatically, but this
functionality is new and largely untested. You can monitor the workers/tasks if you
create another tunnel with:</p>
<pre><code class="language-bash">ssh username@login.htcf.wustl.edu -N -L 8002:n240:5555
</code></pre>
<p>You&rsquo;d access this dashboard at <code>127.0.0.1:5555</code></p>
<p>The login is currently:</p>
<pre><code class="language-raw">username: &quot;flower&quot;
password: &quot;daisy&quot;
</code></pre>
<p>(yes, really &ndash; the security comes from the fact that you need to login with HTCF)</p>
<h3 id="configuring-the-database-interface-classes">Configuring the Database Interface Classes<a class="headerlink" href="#configuring-the-database-interface-classes" title="Permanent link">&para;</a></h3>
<p>The database classes expect the following environmental variables to be set. </p>
<pre><code class="language-raw">BASE_URL='http://127.0.0.1:8001'
TOKEN='&lt;your token=&quot;&quot;&gt;'
BINDING_URL='http://127.0.0.1:8001/api/binding'
BINDINGMANUALQC_URL='http://127.0.0.1:8001/api/bindingmanualqc'
CALLINGCARDSBACKGROUND_URL='http://127.0.0.1:8001/api/callingcardsbackground'
DATASOURCE_URL='http://127.0.0.1:8001/api/datasource'
EXPRESSION_URL='http://127.0.0.1:8001/api/expression'
EXPRESSIONMANUALQC_URL='http://127.0.0.1:8001/api/expressionmanualqc'
FILEFORMAT_URL='http://127.0.0.1:8001/api/fileformat'
GENOMICFEATURE_URL='http://127.0.0.1:8001/api/genomicfeature'
PROMOTERSET_URL='http://127.0.0.1:8001/api/promoterset'
PROMOTERSETSIG_URL='http://127.0.0.1:8001/api/promotersetsig'
REGULATOR_URL='http://127.0.0.1:8001/api/regulator'
</code></pre>
<p>This can be achieved in the package during development with a <code>.env</code> file at the
top most level of the package. The <code>.env</code> file is loaded in the package <code>__init__.py</code>.</p>
<p>If you are importing <code>yeastdnnexplorer</code> into a different environment, then you&rsquo;ll 
need to add the package <code>dotenv</code> and execute <code>load_dotenv(dotenv_path=env_path)</code>. If
the <code>.env</code> file is in the same <code>PWD</code> in which you execute that command, there is no
need to specify a path.</p>
<h3 id="token-authentication">Token Authentication<a class="headerlink" href="#token-authentication" title="Permanent link">&para;</a></h3>
<p>Once you have a username and password to the database, you can retrieve your token. 
Make sure that you put this token, at least, in a <code>.env</code> file, and make sure that 
<code>.env</code> file is in your <code>.gitignore</code>.</p>
<p>Alternatively, you could retrieve and store in memory the token at the beginning of 
each session &ndash; this is more secure if you are not using a <code>.env</code> file.  </p>
<p>The <code>.env</code> file is already in the <code>yeastddnexplorer</code> <code>.gitignore</code></p>
<pre><code class="language-bash">curl -X 'POST' \
  'http://127.0.0.1:8001/auth-token/' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  &quot;username&quot;: &quot;username&quot;,
  &quot;password&quot;: &quot;password&quot;
}'
</code></pre>
<p>Or with python:</p>
<pre><code class="language-python">import requests

url = &quot;http://127.0.0.1:8001/auth-token/&quot;
headers = {
    &quot;accept&quot;: &quot;application/json&quot;,
    &quot;Content-Type&quot;: &quot;application/json&quot;,
}
data = {
    &quot;username&quot;: &quot;username&quot;,
    &quot;password&quot;: &quot;password&quot;,
}

response = requests.post(url, json=data, headers=headers)
print(response.text)
</code></pre>
<p></your></p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="using-the-interface-classes">Using the Interface Classes<a class="headerlink" href="#using-the-interface-classes" title="Permanent link">&para;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">from yeastdnnexplorer.interface import *
</code></pre>


</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="records-only-endpoints">Records Only Endpoints<a class="headerlink" href="#records-only-endpoints" title="Permanent link">&para;</a></h2>
<p>The records only endpoints are:</p>
<ul>
<li>
<p>BindingManualQC</p>
</li>
<li>
<p>DataSource</p>
</li>
<li>
<p>ExpressionManualQC</p>
</li>
<li>
<p>FileFormat</p>
</li>
<li>
<p>GenomicFeature</p>
</li>
<li>
<p>PromoterSetSig</p>
</li>
<li>
<p>Regulator</p>
</li>
</ul>
<p>When the <code>read()</code> method is called on the corresponding API classes, a dataframe will
be returned in the response.</p>
<p>All of the <code>read()</code> methods, for both types of API endpoints, return the result of
a callable. By default, the callable returns a dictionary with two keys: <code>metadata</code> and
<code>data</code>. For response only tables, the <code>metadata</code> value will be the records from the
database as a pandas dataframe and the <code>data</code> will be `None.</p>
<h3 id="example-regulatorapi">Example &ndash; RegulatorAPI<a class="headerlink" href="#example-regulatorapi" title="Permanent link">&para;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">regulator = RegulatorAPI()

result = await regulator.read()
result.get(&quot;metadata&quot;)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stderr output_text">
<pre>
<code>WARNING:yeastdnnexplorer.interface.AbstractAPI:No token provided: URL un-validated
</code>
</pre>
</div>
</div>
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>uploader_id</th>
<th>upload_date</th>
<th>modifier_id</th>
<th>modified_date</th>
<th>genomicfeature_id</th>
<th>under_development</th>
<th>notes</th>
<th>regulator_locus_tag</th>
<th>regulator_symbol</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>6</td>
<td>1</td>
<td>2024-03-18</td>
<td>1</td>
<td>2024-03-18 18:33:43.005782+00:00</td>
<td>17</td>
<td>False</td>
<td>none</td>
<td>YAL059W</td>
<td>ECM1</td>
</tr>
<tr>
<th>1</th>
<td>7</td>
<td>1</td>
<td>2024-03-18</td>
<td>1</td>
<td>2024-03-18 18:33:44.106488+00:00</td>
<td>20</td>
<td>False</td>
<td>none</td>
<td>YAL056W</td>
<td>GPB2</td>
</tr>
<tr>
<th>2</th>
<td>8</td>
<td>1</td>
<td>2024-03-18</td>
<td>1</td>
<td>2024-03-18 18:33:44.605193+00:00</td>
<td>21</td>
<td>False</td>
<td>none</td>
<td>YAL055W</td>
<td>PEX22</td>
</tr>
<tr>
<th>3</th>
<td>9</td>
<td>1</td>
<td>2024-03-18</td>
<td>1</td>
<td>2024-03-18 18:33:44.891194+00:00</td>
<td>22</td>
<td>False</td>
<td>none</td>
<td>YAL054C</td>
<td>ACS1</td>
</tr>
<tr>
<th>4</th>
<td>10</td>
<td>1</td>
<td>2024-03-18</td>
<td>1</td>
<td>2024-03-18 18:33:45.111148+00:00</td>
<td>23</td>
<td>False</td>
<td>none</td>
<td>YAL053W</td>
<td>FLC2</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>1810</th>
<td>1816</td>
<td>1</td>
<td>2024-03-18</td>
<td>1</td>
<td>2024-03-18 23:13:22.054254+00:00</td>
<td>5258</td>
<td>False</td>
<td>none</td>
<td>YMR168C</td>
<td>CEP3</td>
</tr>
<tr>
<th>1811</th>
<td>1817</td>
<td>1</td>
<td>2024-03-18</td>
<td>1</td>
<td>2024-03-18 23:41:58.734300+00:00</td>
<td>5878</td>
<td>False</td>
<td>none</td>
<td>YNR054C</td>
<td>ESF2</td>
</tr>
<tr>
<th>1812</th>
<td>1818</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:04:21.181017+00:00</td>
<td>569</td>
<td>False</td>
<td>none</td>
<td>YBR267W</td>
<td>REI1</td>
</tr>
<tr>
<th>1813</th>
<td>1819</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:04:32.036007+00:00</td>
<td>1171</td>
<td>False</td>
<td>none</td>
<td>YDR081C</td>
<td>PDC2</td>
</tr>
<tr>
<th>1814</th>
<td>1820</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:05:53.691658+00:00</td>
<td>5667</td>
<td>False</td>
<td>none</td>
<td>YNL132W</td>
<td>KRE33</td>
</tr>
</tbody>
</table>
<p>1815 rows × 10 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="record-and-file-endpoints">Record and File Endpoints<a class="headerlink" href="#record-and-file-endpoints" title="Permanent link">&para;</a></h2>
<p>The record and file endpoints are the following:</p>
<ul>
<li>
<p>CallingCardsBackground</p>
</li>
<li>
<p>Expression</p>
</li>
<li>
<p>PromoterSet</p>
</li>
<li>
<p>PromoterSetSig</p>
</li>
<li>
<p>RankResponse *</p>
</li>
</ul>
<p>The default <code>read()</code> method is the same as the Records only Endpoint API classes.
However, there is an additional argument, <code>retrieve_files</code> which if set to <code>True</code>
will retrieve the file for which each record provides metadata. The return value of
<code>read()</code> is again a callable, and by default the <code>data</code> key will store a dictionary
where the keys correspond to the <code>id</code> column in the <code>metadata</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python"># First, retrieve only the records -- you'll want to filter these results down before
# retrieving the files most likely
pss_api = PromoterSetSigAPI()
result = await pss_api.read()
result.get(&quot;metadata&quot;)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stderr output_text">
<pre>
<code>WARNING:yeastdnnexplorer.interface.AbstractAPI:No token provided: URL un-validated
</code>
</pre>
</div>
</div>
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>uploader_id</th>
<th>upload_date</th>
<th>modifier_id</th>
<th>modified_date</th>
<th>binding_id</th>
<th>promoter_id</th>
<th>background_id</th>
<th>fileformat_id</th>
<th>file</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>8419</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:04:11.646870+00:00</td>
<td>3011</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
<td>promotersetsig/8419.csv.gz</td>
</tr>
<tr>
<th>1</th>
<td>8420</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:04:12.153311+00:00</td>
<td>3012</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
<td>promotersetsig/8420.csv.gz</td>
</tr>
<tr>
<th>2</th>
<td>8421</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:04:12.508328+00:00</td>
<td>3013</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
<td>promotersetsig/8421.csv.gz</td>
</tr>
<tr>
<th>3</th>
<td>8422</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:04:12.835947+00:00</td>
<td>3014</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
<td>promotersetsig/8422.csv.gz</td>
</tr>
<tr>
<th>4</th>
<td>8423</td>
<td>1</td>
<td>2024-03-25</td>
<td>1</td>
<td>2024-03-25 20:04:13.162373+00:00</td>
<td>3015</td>
<td>NaN</td>
<td>NaN</td>
<td>1</td>
<td>promotersetsig/8423.csv.gz</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>2178</th>
<td>11091</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:30:28.156704+00:00</td>
<td>4481</td>
<td>4.0</td>
<td>6.0</td>
<td>5</td>
<td>promotersetsig/11091.csv.gz</td>
</tr>
<tr>
<th>2179</th>
<td>11092</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:30:28.218468+00:00</td>
<td>4480</td>
<td>4.0</td>
<td>6.0</td>
<td>5</td>
<td>promotersetsig/11092.csv.gz</td>
</tr>
<tr>
<th>2180</th>
<td>11093</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:30:28.310173+00:00</td>
<td>4482</td>
<td>4.0</td>
<td>6.0</td>
<td>5</td>
<td>promotersetsig/11093.csv.gz</td>
</tr>
<tr>
<th>2181</th>
<td>11094</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:30:28.695849+00:00</td>
<td>4483</td>
<td>4.0</td>
<td>6.0</td>
<td>5</td>
<td>promotersetsig/11094.csv.gz</td>
</tr>
<tr>
<th>2182</th>
<td>11095</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:30:29.202012+00:00</td>
<td>4484</td>
<td>4.0</td>
<td>6.0</td>
<td>5</td>
<td>promotersetsig/11095.csv.gz</td>
</tr>
</tbody>
</table>
<p>2183 rows × 10 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="filtering">Filtering<a class="headerlink" href="#filtering" title="Permanent link">&para;</a></h2>
<p>All API classes have a <code>params</code> attribute which stores the filtering parameters
which will be applied to the HTTP requests.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">pss_api.push_params({&quot;regulator_symbol&quot;: &quot;HAP5&quot;,
                     &quot;workflow&quot;: &quot;nf_core_callingcards_dev&quot;,
                     &quot;data_usable&quot;: &quot;pass&quot;})
</code></pre>


</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="retrieving-files-from-a-records-and-files-object">Retrieving files from a Records and Files Object<a class="headerlink" href="#retrieving-files-from-a-records-and-files-object" title="Permanent link">&para;</a></h2>
<p>To retrieve files from a Records and Files endpoint object, do the following:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python"># note that retrieve_files is set to True
result = await pss_api.read(retrieve_files = True)

# the metadata slot is the same as before
result.get(&quot;metadata&quot;)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>uploader_id</th>
<th>upload_date</th>
<th>modifier_id</th>
<th>modified_date</th>
<th>binding_id</th>
<th>promoter_id</th>
<th>background_id</th>
<th>fileformat_id</th>
<th>file</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>10690</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:28:43.825628+00:00</td>
<td>4079</td>
<td>4</td>
<td>6</td>
<td>5</td>
<td>promotersetsig/10690.csv.gz</td>
</tr>
<tr>
<th>1</th>
<td>10694</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:28:44.739775+00:00</td>
<td>4083</td>
<td>4</td>
<td>6</td>
<td>5</td>
<td>promotersetsig/10694.csv.gz</td>
</tr>
<tr>
<th>2</th>
<td>10754</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:29:01.837335+00:00</td>
<td>4143</td>
<td>4</td>
<td>6</td>
<td>5</td>
<td>promotersetsig/10754.csv.gz</td>
</tr>
<tr>
<th>3</th>
<td>10929</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:29:45.379790+00:00</td>
<td>4318</td>
<td>4</td>
<td>6</td>
<td>5</td>
<td>promotersetsig/10929.csv.gz</td>
</tr>
<tr>
<th>4</th>
<td>10939</td>
<td>1</td>
<td>2024-03-26</td>
<td>1</td>
<td>2024-03-26 14:29:47.853980+00:00</td>
<td>4327</td>
<td>4</td>
<td>6</td>
<td>5</td>
<td>promotersetsig/10939.csv.gz</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python"># but now the data slot is a dictionary where the `id` are keys and the values
# are the files parsed into pandas dataframes
result.get(&quot;data&quot;).get(&quot;10690&quot;)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>name</th>
<th>chr</th>
<th>start</th>
<th>end</th>
<th>strand</th>
<th>experiment_hops</th>
<th>background_hops</th>
<th>background_total_hops</th>
<th>experiment_total_hops</th>
<th>callingcards_enrichment</th>
<th>poisson_pval</th>
<th>hypergeometric_pval</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>1</td>
<td>chrI</td>
<td>0</td>
<td>335</td>
<td>+</td>
<td>0</td>
<td>2</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.305876</td>
<td>1.0</td>
</tr>
<tr>
<th>1</th>
<td>2</td>
<td>chrI</td>
<td>0</td>
<td>538</td>
<td>+</td>
<td>0</td>
<td>4</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.411518</td>
<td>1.0</td>
</tr>
<tr>
<th>2</th>
<td>3</td>
<td>chrI</td>
<td>2169</td>
<td>2480</td>
<td>-</td>
<td>0</td>
<td>1</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.246143</td>
<td>1.0</td>
</tr>
<tr>
<th>3</th>
<td>4</td>
<td>chrI</td>
<td>2169</td>
<td>2480</td>
<td>+</td>
<td>0</td>
<td>1</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.246143</td>
<td>1.0</td>
</tr>
<tr>
<th>4</th>
<td>5</td>
<td>chrI</td>
<td>9017</td>
<td>9717</td>
<td>-</td>
<td>0</td>
<td>11</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.669806</td>
<td>1.0</td>
</tr>
<tr>
<th>...</th>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<th>6703</th>
<td>7118</td>
<td>chrM</td>
<td>66174</td>
<td>66874</td>
<td>-</td>
<td>0</td>
<td>0</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.181269</td>
<td>1.0</td>
</tr>
<tr>
<th>6704</th>
<td>7132</td>
<td>chrM</td>
<td>74513</td>
<td>75213</td>
<td>-</td>
<td>0</td>
<td>0</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.181269</td>
<td>1.0</td>
</tr>
<tr>
<th>6705</th>
<td>7133</td>
<td>chrM</td>
<td>75984</td>
<td>76684</td>
<td>-</td>
<td>0</td>
<td>0</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.181269</td>
<td>1.0</td>
</tr>
<tr>
<th>6706</th>
<td>7137</td>
<td>chrM</td>
<td>80022</td>
<td>80722</td>
<td>-</td>
<td>0</td>
<td>0</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.181269</td>
<td>1.0</td>
</tr>
<tr>
<th>6707</th>
<td>7140</td>
<td>chrM</td>
<td>85709</td>
<td>85779</td>
<td>-</td>
<td>0</td>
<td>0</td>
<td>103922</td>
<td>8579</td>
<td>0.0</td>
<td>0.181269</td>
<td>1.0</td>
</tr>
</tbody>
</table>
<p>6708 rows × 12 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Parameters can be removed one by one</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">print(pss_api.params)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>regulator_symbol: HAP5, workflow: nf_core_callingcards_dev, data_usable: pass
</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">pss_api.pop_params('data_usable')

print(pss_api.params)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stdout output_text">
<pre>
<code>regulator_symbol: HAP5, workflow: nf_core_callingcards_dev
</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or cleared entirely</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">pss_api.pop_params(None)

pss_api.params == {}
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>True</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="rank-response">Rank Response<a class="headerlink" href="#rank-response" title="Permanent link">&para;</a></h2>
<p>The rank response endpoint is slightly different than the others.</p>
<ol>
<li>
<p>It is an additional action of the promotersetsig table, and so does not have
   a &lsquo;records_only&rsquo; option. Data files will always be retrieved/returned.</p>
</li>
<li>
<p>It currently requires that the parameters <code>promotersetsig_id</code> and <code>expression_id</code>
   be set.</p>
</li>
<li>
<p>It requires that celery workers are available. On the cluster, this means
    submitting additional jobs. At the time of writing, this hasn&rsquo;t yet been automated.</p>
</li>
<li>
<p>The <code>id</code> is the concatenation of the <code>promotersetsig_id</code>_<code>expression_id</code></p>
</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">rr_api = RankResponseAPI()

rr_api.push_params({&quot;promotersetsig_id&quot;: &quot;8783&quot;,
                    &quot;expression_id&quot;: &quot;4563&quot;})

result = await rr_api.read()
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_subarea output_stream output_stderr output_text">
<pre>
<code>WARNING:yeastdnnexplorer.interface.AbstractAPI:No token provided: URL un-validated
</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">result.get(&quot;metadata&quot;)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>id</th>
<th>promotersetsig_id</th>
<th>n_responsive</th>
<th>total_expression_genes</th>
<th>filename</th>
<th>expression_id</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>8783_4563</td>
<td>8783</td>
<td>1074</td>
<td>6175</td>
<td>8783_4563.csv.gz</td>
<td>4563</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<pre><code class="language-python">result.get(&quot;data&quot;).get(&quot;8783_4563&quot;)
</code></pre>


</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>rank_bin</th>
<th>n_responsive_in_rank</th>
<th>random</th>
<th>n_successes</th>
<th>response_ratio</th>
<th>pvalue</th>
<th>ci_lower</th>
<th>ci_upper</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>5</td>
<td>2</td>
<td>0.173913</td>
<td>2</td>
<td>0.400000</td>
<td>0.210341</td>
<td>0.052745</td>
<td>0.853367</td>
</tr>
<tr>
<th>1</th>
<td>10</td>
<td>1</td>
<td>0.173913</td>
<td>3</td>
<td>0.300000</td>
<td>0.393247</td>
<td>0.066740</td>
<td>0.652453</td>
</tr>
<tr>
<th>2</th>
<td>15</td>
<td>1</td>
<td>0.173913</td>
<td>4</td>
<td>0.266667</td>
<td>0.313515</td>
<td>0.077872</td>
<td>0.551003</td>
</tr>
<tr>
<th>3</th>
<td>20</td>
<td>0</td>
<td>0.173913</td>
<td>4</td>
<td>0.200000</td>
<td>0.767009</td>
<td>0.057334</td>
<td>0.436614</td>
</tr>
<tr>
<th>4</th>
<td>25</td>
<td>1</td>
<td>0.173913</td>
<td>5</td>
<td>0.200000</td>
<td>0.790608</td>
<td>0.068311</td>
<td>0.407037</td>
</tr>
<tr>
<th>5</th>
<td>30</td>
<td>2</td>
<td>0.173913</td>
<td>7</td>
<td>0.233333</td>
<td>0.344051</td>
<td>0.099338</td>
<td>0.422837</td>
</tr>
<tr>
<th>6</th>
<td>35</td>
<td>0</td>
<td>0.173913</td>
<td>7</td>
<td>0.200000</td>
<td>0.656334</td>
<td>0.084406</td>
<td>0.369379</td>
</tr>
<tr>
<th>7</th>
<td>40</td>
<td>1</td>
<td>0.173913</td>
<td>8</td>
<td>0.200000</td>
<td>0.675722</td>
<td>0.090522</td>
<td>0.356478</td>
</tr>
<tr>
<th>8</th>
<td>45</td>
<td>0</td>
<td>0.173913</td>
<td>8</td>
<td>0.177778</td>
<td>1.000000</td>
<td>0.080018</td>
<td>0.320534</td>
</tr>
<tr>
<th>9</th>
<td>50</td>
<td>0</td>
<td>0.173913</td>
<td>8</td>
<td>0.160000</td>
<td>1.000000</td>
<td>0.071701</td>
<td>0.291126</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="caveats">Caveats<a class="headerlink" href="#caveats" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>I have written the scripts to automatically check the redis queue for work and to 
   both launch celery worker nodes, and kill them when they are finished. But, though
   they work if I run them manually, they have not worked when scheduled through a
   cronjob. I&rsquo;ll work with Brian and Eric next week to figure out why.</p>
</li>
<li>
<p>I haven&rsquo;t tested each of the endpoint APIs individually. Help is welcome.</p>
</li>
</ol>
</div>
</div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>